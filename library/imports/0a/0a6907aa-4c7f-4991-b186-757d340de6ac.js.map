{"version":3,"sources":["assets\\script\\battle_man.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Man from \"./man\";\r\nimport GlobalData from \"./GlobalData\";\r\ndeclare const firebase: any;\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    label: cc.Label = null;\r\n\r\n    @property\r\n    text: string = 'hello';\r\n\r\n    @property({type:cc.AudioClip})\r\n    battleBgm: cc.AudioClip = null;\r\n\r\n    @property({type:cc.AudioClip})\r\n    winSound: cc.AudioClip = null;\r\n\r\n    @property({type:cc.AudioClip})\r\n    loseSound: cc.AudioClip = null;\r\n\r\n    @property({type:cc.Node})\r\n    mainCamera: cc.Node = null;\r\n\r\n    @property({type:cc.SpriteFrame})\r\n    enemy1: cc.SpriteFrame = null;\r\n\r\n    @property({type:cc.SpriteFrame})\r\n    enemy2: cc.SpriteFrame = null;\r\n\r\n\r\n    @property(Man)\r\n    man: Man = null;\r\n\r\n    private myLife: number = 100;\r\n    private enemyLife: number = 100;\r\n    private isWin: boolean = false;\r\n    private myTurn: boolean = true;\r\n    private enemyTurn: boolean = false;\r\n    private isLose: boolean = false;\r\n    private enemynum = 0;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        // this.enemynum = cc.director.getScene()[\"enemyNum\"];\r\n        // console.log(\"enemyNum:\", this.enemynum);\r\n        // if(this.enemynum !== undefined){\r\n        //     console.log(\"Number passed from previous scene:\", this.enemynum);\r\n        //     //this.enemynum = enemyNum;\r\n        // }\r\n    }\r\n\r\n    start () {\r\n        this.enemynum = cc.director.getScene()[\"enemyNum\"];\r\n        \r\n        //console.log(\"enemyNum:\", this.enemynum);\r\n\r\n        if(this.enemynum !== undefined){\r\n            //console.log(\"Number passed from previous scene:\", this.enemynum);\r\n        }\r\n\r\n        if(this.enemynum == 4){\r\n            if(cc.find(\"Canvas/enemy\").getComponent(cc.Sprite).spriteFrame == null){\r\n                cc.find(\"Canvas/enemy\").getComponent(cc.Sprite).spriteFrame = this.enemy1;\r\n            }\r\n            \r\n        }else if(this.enemynum == 5){\r\n            if(cc.find(\"Canvas/enemy\").getComponent(cc.Sprite).spriteFrame == null){\r\n                cc.find(\"Canvas/enemy\").getComponent(cc.Sprite).spriteFrame = this.enemy2;\r\n            }\r\n        }\r\n        cc.audioEngine.playMusic(this.battleBgm, true);\r\n        this.initSkill1();\r\n        this.initSkill2();\r\n        this.initSkill3();\r\n        this.initSkill4();\r\n    }\r\n\r\n    update(dt){\r\n        \r\n        \r\n        this.updateUI(dt);\r\n        if(this.enemyLife <= 0 && !this.isWin){\r\n            // var uid = GlobalData.uid;\r\n            // const database = firebase.database();\r\n            // firebase.database().ref('user').child(GlobalData.uid).update({\r\n            //     myArray: [this.enemynum],\r\n            // });\r\n            GlobalData.pokewoman.push(this.enemynum);\r\n\r\n\r\n            this.enemyLife = 0;\r\n            this.isWin = true;\r\n            cc.audioEngine.pauseMusic();\r\n            cc.audioEngine.playEffect(this.winSound, false);\r\n            \r\n            this.scheduleOnce(function() {\r\n                cc.director.loadScene(\"map2\", ()=>{\r\n                    // const nextScene = cc.director.getScene();\r\n                    let enemyNumString = cc.js.formatStr(\"%d\", this.enemynum);\r\n                    GlobalData.nodeToDestroy.push(enemyNumString);\r\n                    // nextScene[\"nodeToDestroy\"] = enemyNumString;\r\n                    // //console.log(\"nextScene[nodeToDestroy]\", enemyNumString);\r\n                    // console.log(\"nextScene[nodeToDestroy]\", nextScene[\"nodeToDestroy\"]);\r\n                }\r\n                );\r\n            }, 4);\r\n        }\r\n\r\n        if(this.myLife<=0 && !this.isLose){\r\n            this.myLife = 0;\r\n            this.isLose = true;\r\n            this.myTurn = false;\r\n            this.enemyTurn = false;\r\n            cc.audioEngine.pauseMusic();\r\n            cc.audioEngine.playEffect(this.loseSound, false);\r\n            this.scheduleOnce(function() {\r\n                cc.director.loadScene(\"map2\");\r\n            }, 4);\r\n        }\r\n\r\n        if(this.enemyTurn && !this.myTurn && this.enemyLife > 0){\r\n            this.enemyTurn = false;\r\n            this.myTurn = true;\r\n            this.enemyTurnAction();\r\n            \r\n            //this.scheduleOnce(function() {\r\n                //cc.find(\"Canvas/skill1\").getComponent(cc.Button).interactable = this.myTurn;\r\n            // }, 2);\r\n        }\r\n\r\n        if(!this.enemyTurn && this.myTurn && this.myLife > 0){\r\n\r\n            //cc.find(\"Canvas/skill1\").getComponent(cc.Button).interactable = this.myTurn;\r\n        }\r\n        cc.find(\"Canvas/skill1\").getComponent(cc.Button).interactable = this.myTurn;\r\n        cc.find(\"Canvas/skill2\").getComponent(cc.Button).interactable = this.myTurn;\r\n        cc.find(\"Canvas/skill3\").getComponent(cc.Button).interactable = this.myTurn;\r\n        cc.find(\"Canvas/skill4\").getComponent(cc.Button).interactable = this.myTurn;\r\n    //}\r\n    }\r\n\r\n    updateUI(dt){\r\n        cc.find(\"Canvas/myLife\").getComponent(cc.Label).string = (Array(7).join(\"0\") + this.myLife.toString()).slice(-3);\r\n        cc.find(\"Canvas/enemyLife\").getComponent(cc.Label).string = (Array(7).join(\"0\") + this.enemyLife.toString()).slice(-3);\r\n    }\r\n\r\n    initSkill1(){\r\n        let clickEventHandler = new cc.Component.EventHandler();\r\n        clickEventHandler.target = this.node; \r\n        clickEventHandler.component = \"battle_man\";\r\n        clickEventHandler.handler = \"skill1\";\r\n\r\n        cc.find(\"Canvas/skill1\").getComponent(cc.Button).clickEvents.push(clickEventHandler);\r\n\r\n        \r\n    }\r\n\r\n    initSkill2(){\r\n        let clickEventHandler = new cc.Component.EventHandler();\r\n        clickEventHandler.target = this.node; \r\n        clickEventHandler.component = \"battle_man\";\r\n        clickEventHandler.handler = \"skill2\";\r\n\r\n        cc.find(\"Canvas/skill2\").getComponent(cc.Button).clickEvents.push(clickEventHandler);\r\n    }\r\n\r\n    initSkill3(){\r\n        let clickEventHandler = new cc.Component.EventHandler();\r\n        clickEventHandler.target = this.node; \r\n        clickEventHandler.component = \"battle_man\";\r\n        clickEventHandler.handler = \"skill3\";\r\n\r\n        cc.find(\"Canvas/skill3\").getComponent(cc.Button).clickEvents.push(clickEventHandler);\r\n    }\r\n\r\n    initSkill4(){\r\n        let clickEventHandler = new cc.Component.EventHandler();\r\n        clickEventHandler.target = this.node; \r\n        clickEventHandler.component = \"battle_man\";\r\n        clickEventHandler.handler = \"skill4\";\r\n\r\n        cc.find(\"Canvas/skill4\").getComponent(cc.Button).clickEvents.push(clickEventHandler);\r\n\r\n        \r\n    }\r\n\r\n    skill1(){\r\n        //cc.log(\"skill1\");\r\n        let enemyLifeDeduct = cc.callFunc(function(target) {\r\n            this.enemyLife -= 50;\r\n        }, this);\r\n\r\n        let turnSwitch1 = cc.callFunc(function(target) {\r\n            this.myTurn = false;\r\n        }, this);\r\n\r\n        let turnSwitch2 = cc.callFunc(function(target) {\r\n            this.enemyTurn = true;\r\n        }, this);\r\n\r\n        this.node.runAction(cc.sequence(turnSwitch1, cc.moveBy(1, cc.v2(520, 0)), cc.moveBy(1, cc.v2(-520, 0)),enemyLifeDeduct, turnSwitch2))\r\n    }\r\n\r\n    skill2(){\r\n        //cc.log(\"skill2\");\r\n        let enemyLifeDeduct = cc.callFunc(function(target) {\r\n            this.enemyLife -= 20;\r\n        }, this);\r\n\r\n        let turnSwitch1 = cc.callFunc(function(target) {\r\n            this.myTurn = false;\r\n        }, this);\r\n\r\n        let turnSwitch2 = cc.callFunc(function(target) {\r\n            this.enemyTurn = true;\r\n        }, this);\r\n\r\n        this.node.runAction(cc.sequence(turnSwitch1, cc.moveBy(1, cc.v2(520, 0)), cc.moveBy(1, cc.v2(-520, 0)),enemyLifeDeduct, turnSwitch2))\r\n    }\r\n\r\n    skill3(){\r\n        //cc.log(\"skill3\");\r\n        let enemyLifeDeduct = cc.callFunc(function(target) {\r\n            this.enemyLife -= 20;\r\n        }, this);\r\n\r\n        let turnSwitch1 = cc.callFunc(function(target) {\r\n            this.myTurn = false;\r\n        }, this);\r\n\r\n        let turnSwitch2 = cc.callFunc(function(target) {\r\n            this.enemyTurn = true;\r\n        }, this);\r\n\r\n        this.node.runAction(cc.sequence(turnSwitch1, cc.moveBy(1, cc.v2(520, 0)), cc.moveBy(1, cc.v2(-520, 0)),enemyLifeDeduct, turnSwitch2))\r\n    }\r\n\r\n    skill4(){\r\n        //cc.log(\"skill4\");\r\n        let enemyLifeDeduct = cc.callFunc(function(target) {\r\n            this.enemyLife -= 100;\r\n        }, this);\r\n\r\n        let turnSwitch1 = cc.callFunc(function(target) {\r\n            this.myTurn = false;\r\n        }, this);\r\n\r\n        let turnSwitch2 = cc.callFunc(function(target) {\r\n            this.enemyTurn = true;\r\n        }, this);\r\n\r\n        this.node.runAction(cc.sequence(turnSwitch1, cc.moveBy(1, cc.v2(520, 0)), cc.moveBy(1, cc.v2(-520, 0)),enemyLifeDeduct, turnSwitch2))\r\n    }\r\n\r\n    enemyTurnAction(){\r\n        let myLifeDeduct = cc.callFunc(function(target) {\r\n            //console.log(\"enemyNum in mylife deduct:\", this.enemynum);\r\n            if(this.enemynum == 4) this.myLife -= 40;\r\n            else if(this.enemynum == 5) this.myLife -= 100;\r\n        }, this);\r\n\r\n        let turnSwitch1 = cc.callFunc(function(target) {\r\n            this.myTurn = false;\r\n            this.enemyTurn = false;\r\n        }, this);\r\n\r\n        let turnSwitch2 = cc.callFunc(function(target) {\r\n            this.myTurn = true;\r\n            this.enemyTurn = false;\r\n        }, this);\r\n\r\n\r\n        let enemy = cc.find(\"Canvas/enemy\");\r\n        enemy.runAction(cc.sequence(turnSwitch1, cc.moveBy(1, cc.v2(-520, 0)), cc.moveBy(1, cc.v2(520, 0)),myLifeDeduct, turnSwitch2))\r\n    }\r\n\r\n}\r\n"]}