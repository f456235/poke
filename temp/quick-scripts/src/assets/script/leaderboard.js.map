{"version":3,"sources":["assets\\script\\leaderboard.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\ndeclare const firebase : any;\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    first: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    second: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    third: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    fourth: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    fifth: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    back: cc.Button = null;\r\n    // LIFE-CYCLE CALLBACKS:\r\n    private rank: Array<any> = [];\r\n    private rankName: Array<any> = [];  \r\n    private labelString: Array<string> = [];\r\n    onLoad () {\r\n        // read data from firebase and show it on leaderboard , and only read \"win\" data for every user\r\n        const database = firebase.database();\r\n        const userRef = database.ref('user');\r\n        userRef.once('value', (snapshot) => {\r\n            const userData = snapshot.val();\r\n            console.log(userData);\r\n            for (const key in userData) {\r\n                if (userData.hasOwnProperty(key)) {\r\n                    const element = userData[key];\r\n                    this.rank.push(element.win);\r\n                    this.rankName.push(element.name);\r\n                }\r\n            }\r\n            console.log(this.rank);\r\n            this.rank.sort((a, b) => b - a);\r\n            // string = rankName + rank\r\n            for (let i = 0; i < 5; i++) {\r\n               if(typeof this.rank[i] === 'number'){\r\n                    console.log(this.rank[i],this.rankName[i]);\r\n                    this.labelString[i] =this.rankName[i] + '      wins:' + this.rank[i].toString();\r\n               }else{\r\n                    this.labelString[i]=\"\";\r\n               }\r\n            }\r\n            this.first.string = this.labelString[0];\r\n            this.second.string = this.labelString[1];\r\n            this.third.string = this.labelString[2];\r\n            this.fourth.string = this.labelString[3];\r\n            this.fifth.string = this.labelString[4];\r\n        });\r\n        this.back.node.on('click',this.backToLogin,this);\r\n    }\r\n    backToLogin(){\r\n        cc.director.loadScene('login');\r\n    }\r\n    start () {\r\n\r\n    }\r\n\r\n    update (dt) {\r\n\r\n    }\r\n}\r\n"]}